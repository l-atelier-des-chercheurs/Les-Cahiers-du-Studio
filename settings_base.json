{
  "protocol": "http",
  "host": "localhost",
  "desired_port": 8080,
  "redirect_port": "",
  "userDirPath": "documents",
  "userDirname": "les-cahiers",
  "cache_content": true,

  "contentDirname": "user",
  "cacheDirname": "les-cahiers_cache",
  "metaFileext": ".txt",
  "thumbExt": ".jpeg",
  "thumbFormat": "jpeg",
  "folderMetaFilename": "meta",
  "folderPreviewFilename": "meta_preview",

  "privateKeyPath": "",
  "certificatePath": "",

  "metaDateFormat": "YYYYMMDD_HHmmss",
  "textEncoding": "UTF-8",
  "thumbFolderName": "_thumbs",
  "deletedFolderName": "_bin",

  "ffmpeg_options": {
    "priority": 0,
    "timeout": 600
  },

  "mediaThumbQuality": 70,
  "maxFileSizeForUpload": 10000,

  "_comment": "// see http://regexr.com/3d4t8",
  "regexpMatchFolderNames": "^([^.]+)$",
  "regexpGetFileExtension": "\\.[^.]*$",
  "regexpRemoveFileExtension": "(.+?)(\\.[^.]*$|$)",

  "api": {
    "enabled": false,
    "allow_all_domains": false,
    "domains_whitelist": ["localhost"]
  },

  "structure": {
    "folders": {
      "path": "",
      "fields": {
        "name": {
          "type": "string"
        },
        "created": {
          "type": "date",
          "default": "current",
          "read_only": true
        },
        "start": {
          "type": "date",
          "default": "current"
        },
        "end": {
          "type": "date"
        },
        "password": {
          "type": "string"
        },
        "authors": {
          "type": "array"
        },
        "editing_limited_to": {
          "type": "string",
          "options": ["everybody", "with_password", "only_authors"],
          "default": "everybody"
        },
        "viewing_limited_to": {
          "type": "string",
          "options": ["everybody", ""],
          "default": "everybody"
        }
      },
      "medias": {
        "thumbs": {
          "resolutions": [50, 180, 360, 1600]
        },
        "fields": {
          "name": {
            "type": "string"
          },
          "created": {
            "type": "date",
            "read_only": true,
            "is_replaced_by": "date_created"
          },
          "date_timeline": {
            "type": "date",
            "default": "current"
          },
          "date_created": {
            "type": "date",
            "default": "current",
            "read_only": true
          },
          "date_upload": {
            "type": "date",
            "default": "current",
            "read_only": true
          },
          "date_modified": {
            "type": "date",
            "default": "current",
            "override": true
          },
          "media_filename": {
            "type": "string"
          },
          "public": {
            "type": "boolean",
            "default": false
          },
          "color": {
            "type": "string",
            "options": [
              "white",
              "red",
              "blue",
              "green",
              "purple",
              "orange",
              "yellow"
            ],
            "default": "white"
          },
          "type": {
            "type": "string",
            "options": [
              "image",
              "video",
              "audio",
              "text",
              "marker",
              "embed",
              "document",
              "writeup",
              "introduction",
              "other"
            ],
            "default": "other"
          },
          "collapsed": {
            "type": "boolean",
            "default": false
          },
          "ratio": {
            "type": "number"
          },
          "duration": {
            "type": "number"
          },
          "authors": {
            "type": "array"
          },
          "device_infos": {
            "type": "array"
          },
          "keywords": {
            "type": "array"
          },
          "y": {
            "type": "number",
            "default": "random",
            "clip": {
              "min": 0,
              "max": 1
            }
          },
          "w": {
            "type": "number",
            "clip": {
              "min": 1,
              "max": 12
            }
          },
          "h": {
            "type": "number",
            "clip": {
              "min": 1,
              "max": 12
            }
          },
          "t": {
            "type": "number",
            "clip": {
              "min": 0,
              "max": 17
            }
          },
          "l": {
            "type": "number",
            "clip": {
              "min": 0,
              "max": 12000
            }
          },
          "caption": {
            "type": "string"
          }
        }
      }
    },
    "chats": {
      "path": "_chats",
      "fields": {
        "name": {
          "type": "string"
        },
        "description": {
          "type": "string"
        },
        "date_created": {
          "type": "date",
          "default": "current",
          "read_only": true
        },
        "date_modified": {
          "type": "date",
          "default": "current",
          "override": true
        },
        "authors": {
          "type": "array"
        },
        "editing_limited_to": {
          "type": "string",
          "options": ["everybody"],
          "default": "everybody"
        },
        "viewing_limited_to": {
          "type": "string",
          "options": ["everybody"],
          "default": "everybody"
        },
        "pinned": {
          "type": "boolean"
        },
        "number_of_medias": {
          "type": "number",
          "only_admin_can_edit": true
        },
        "attached_to_folder": {
          "type": "string"
        },
        "is_linked_to_media": {
          "type": "string"
        }
      },
      "medias": {
        "fields": {
          "date_created": {
            "type": "date",
            "default": "current",
            "read_only": true
          },
          "text": {
            "type": "string"
          },
          "authors": {
            "type": "array"
          }
        }
      }
    },
    "authors": {
      "path": "_authors",
      "preview": {
        "width": 1200,
        "height": 1200,
        "thumbs": {
          "resolutions": [50, 180, 640]
        }
      },
      "fields": {
        "name": {
          "type": "string"
        },
        "password": {
          "type": "string",
          "transform": "crypt"
        },
        "date_created": {
          "type": "date",
          "default": "current",
          "read_only": true
        },
        "email": {
          "type": "string",
          "show_only_to": ["self", "admin"]
        },
        "role": {
          "type": "string",
          "options": ["participant", "contributor", "admin"],
          "default": "contributor",
          "only_admin_can_edit": true
        },
        "description": {
          "type": "string"
        },
        "nfc_tag": {
          "type": "string"
        },
        "last_messages_read_in_channels": {
          "type": "array"
        },
        "color": {
          "type": "string"
        }
      }
    }
  }
}
